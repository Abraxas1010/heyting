<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>LoF Visualization Blueprint — Global Dependency Graph</title>
  <style>
    :root {
      color-scheme: dark;
      --bg: #0b111b;
      --ink: #e2eefc;
      --muted: #9fb7d7;
      --accent: #6ee7ff;
      --done: #22c55e;
      --scaffold: #facc15;
      --todo: #f97316;
      --external: #38bdf8;
      --card: #0f172a;
      --stroke: #1f2c3d;
      --nav-bg: rgba(15, 23, 42, 0.9);
      --nav-pill: rgba(30, 41, 59, 0.8);
      --nav-pill-active: #38bdf8;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Inter", "Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg);
      color: var(--ink);
      line-height: 1.45;
      padding-bottom: 4rem;
    }
    .wrap {
      max-width: 1080px;
      margin: 0 auto;
      padding: 2.75rem 2.25rem 3.5rem;
    }
    .nav {
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
      margin-bottom: 2rem;
      background: var(--nav-bg);
      border: 1px solid var(--stroke);
      padding: 0.85rem 1.1rem;
      border-radius: 14px;
    }
    .nav a {
      padding: 0.45rem 0.95rem;
      border-radius: 999px;
      background: var(--nav-pill);
      color: var(--muted);
      text-decoration: none;
      font-size: 0.9rem;
      transition: background 0.2s ease, color 0.2s ease;
    }
    .nav a:hover {
      color: var(--ink);
    }
    .nav a.active {
      background: var(--nav-pill-active);
      color: #082f49;
      font-weight: 600;
    }
    section {
      margin-top: 2.5rem;
      background: var(--card);
      border: 1px solid var(--stroke);
      border-radius: 18px;
      padding: 1.75rem 2rem;
    }
    section h2 {
      margin: 0 0 1rem;
      font-size: 1.35rem;
      font-weight: 600;
    }
    ul {
      margin: 0;
      padding-left: 1.3rem;
    }
    li {
      margin: 0.4rem 0;
      color: var(--muted);
    }
    code {
      background: rgba(148, 163, 184, 0.12);
      padding: 0 0.25rem;
      border-radius: 6px;
      font-size: 0.95rem;
    }
    .legend {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }
    .legend-item {
      display: flex;
      align-items: center;
      gap: 0.7rem;
      padding: 0.75rem 1rem;
      border: 1px solid var(--stroke);
      border-radius: 12px;
      background: rgba(15, 23, 42, 0.6);
    }
    .swatch {
      width: 18px;
      height: 18px;
      border-radius: 4px;
      border: 1px solid rgba(255,255,255,0.2);
    }
    .swatch.done { background: var(--done); }
    .swatch.scaffold { background: var(--scaffold); }
    .swatch.todo { background: var(--todo); }
    .swatch.external { background: var(--external); }
    .footnote {
      margin-top: 1.5rem;
      font-size: 0.9rem;
      color: var(--muted);
    }
  </style>
</head>
<body>
  <main class="wrap">
    <header>
      <h1>LoF Visualization Blueprint — Global Dependency Graph</h1>
      <p>
        Inspired by the Infinity Cosmos blueprint (<code>dependency_graph_document.html</code>), this page sketches
        the full dependency graph we want for LoF proofs, bridges, and visuals. The final goal is a single interactive
        canvas: hovering reveals proof summaries, clicking opens the relevant blueprint card, and colouring indicates
        verification status.
      </p>
    </header>
    <nav class="nav">
      <a href="index.html">Generative Spine</a>
      <a href="global.html" class="active">Global Graph</a>
      <a href="bridges.html">Bridges</a>
      <a href="renderers.html">Renderers</a>
      <a href="rpc-widget.html">RPC &amp; Widget</a>
      <a href="proof-layer.html">Proof Layer</a>
      <a href="tests.html">Tests &amp; Monitoring</a>
    </nav>

    <section>
      <h2>Legend &amp; Status Codes (Blueprint SDK)</h2>
      <div class="legend">
        <div class="legend-item">
          <span class="swatch done"></span>
          <span><strong>Verified</strong> — Lean proofs/bridges are complete; blueprint hover shows definition + theorem bullets.</span>
        </div>
        <div class="legend-item">
          <span class="swatch scaffold"></span>
          <span><strong>Scaffold</strong> — Lean files exist but proofs still pending; hover lists TODO lemmas/tests.</span>
        </div>
        <div class="legend-item">
          <span class="swatch todo"></span>
          <span><strong>Planned</strong> — Node exists only in roadmap; hover links to design notes.</span>
        </div>
        <div class="legend-item">
          <span class="swatch external"></span>
          <span><strong>External/Dependency</strong> — External libraries or upstream proof obligations (e.g. <code>mathlib4</code>).</span>
        </div>
      </div>
      <p class="footnote">
        Implementation detail: use the blueprint SDK to assign node metadata (`status`, `hover_html`, `click_target`)
        so we can reproduce the Cosmos behaviour (hover definitions + clickable popovers).
      </p>
    </section>

    <section>
      <h2>Planned Graph Sections</h2>
      <ul>
        <li><strong>Core Foundations:</strong> LoF primitives, re-entry nucleus, Heyting core (`HeytingLean/LoF`).</li>
        <li><strong>Stage Semantics:</strong> MV/effect/OML overlays (`HeytingLean/Logic/StageSemantics`), Occam reductions.</li>
        <li><strong>Bridge Families:</strong> Tensor, Graph, Clifford (green); Geometry/Category/Probabilistic (planned) — each node links to its card.</li>
        <li><strong>Proof Layer:</strong> Export modules (`Proof/Core`, `Proof/Graph`, `ExportProofGraphs.lean`) and certificate bundles.</li>
        <li><strong>Visualization Outputs:</strong> Kernel models, renderers, RPC + widget, static exports.</li>
        <li><strong>Testing &amp; Monitoring:</strong> Lean unit tests, golden SVG suite, JS integration harness, CI dashboards.</li>
        <li><strong>Documentation &amp; Ops:</strong> Blueprint pages, `Docs/Visualization.md`, contributor guides.</li>
      </ul>
    </section>

    <section>
      <h2>Card Destinations for Clicks</h2>
      <p>
        Each node in the future dependency graph will open one of the existing blueprint cards or a new page:
      </p>
      <ul>
        <li><em>Generative spine nodes</em> → <code>index.html</code></li>
        <li><em>Bridge nodes</em> → <code>bridge-*.html</code> (tensor, graph, Clifford, etc.)</li>
        <li><em>Renderer/Kernel nodes</em> → <code>renderers.html</code></li>
        <li><em>RPC/widget nodes</em> → <code>rpc-widget.html</code></li>
        <li><em>Proof export nodes</em> → <code>proof-layer.html</code></li>
        <li><em>Testing nodes</em> → <code>tests.html</code></li>
        <li><em>Docs/ops nodes</em> → new card (TBD) covering documentation and ops playbooks</li>
      </ul>
    </section>

    <section>
      <h2>Hover/Popover Content Plan</h2>
      <ul>
        <li>Definition snippet (1–2 lines) with Lean module path.</li>
        <li>Status chips: Verified/Scaffold/TODO/External.</li>
        <li>Critical theorems or invariants (bullet list) with quick links (e.g., `stageMvAdd_encode`).</li>
        <li>Testing coverage indicator (e.g., `Tests.lean`, integration harness).</li>
        <li>“Jump to card” button linking to the detailed page.</li>
      </ul>
    </section>

    <section>
      <h2>Next Implementation Steps</h2>
      <ul>
        <li>Define node + edge metadata (JSON/YAML) consumable by the blueprint SDK.</li>
        <li>Prototype the force-directed/orthogonal layout to organise the seven sections above.</li>
        <li>Integrate hover popovers and click-through behaviour (matching the Infinity Cosmos UX).</li>
        <li>Add filters (e.g., show only bridges/tests/renderers) and search.</li>
        <li>Wire automated export (CI job) that regenerates the graph when Lean proofs change.</li>
      </ul>
    </section>

    <p class="footnote">
      Open question: whether to embed the graph directly in `Docs/LoFBlueprint/global.html` or host it as a generated
      asset (`.svg`/`.json`) with progressive enhancement. Either way, this page records the structure we need to reach
      parity with the Infinity Cosmos example.
    </p>
  </main>
</body>
</html>
