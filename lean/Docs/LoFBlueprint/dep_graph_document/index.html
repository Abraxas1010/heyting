<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Laws of Form Dependency Graph</title>
    <link rel="stylesheet" href="styles/dep-graph.css" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
  </head>
  <body>
    <header class="page-header">
      <h1>Laws of Form Dependency Graph</h1>
      <p>
        Visualise how the blueprint threads definitions and proofs through the
        Laws of Form generative core. Drag nodes to inspect neighbourhoods;
        click a node to read its synopsis without leaving the page.
      </p>
      <div class="legend" id="legend">
        <h2>Legend</h2>
        <div class="legend-section">
          <h3>Shapes</h3>
          <div class="legend-item">
            <span class="legend-shape"></span>
            <div>
              <strong>Boxes</strong>
              <p>Definitions, carriers, and structural data.</p>
            </div>
          </div>
          <div class="legend-item">
            <span class="legend-shape legend-shape--ellipse"></span>
            <div>
              <strong>Ellipses</strong>
              <p>Theorems, lemmas, and propositions derived from the core.</p>
            </div>
          </div>
        </div>
        <div class="legend-section">
          <h3>Status Channels</h3>
          <div class="legend-item">
            <span class="legend-status legend-status--statement-ready"></span>
            <div>
              <strong>Blue border</strong>
              <p>Statement blueprint complete; prerequisites satisfied.</p>
            </div>
          </div>
          <div class="legend-item">
            <span class="legend-status legend-status--out-of-sync"></span>
            <div>
              <strong>Orange border</strong>
              <p>Document references a Lean constant, but the build cannot find it.</p>
            </div>
          </div>
          <div class="legend-item">
            <span class="legend-status legend-status--formalized"></span>
            <div>
              <strong>Green background</strong>
              <p>Formalised in HeytingLean; Lean declaration linked.</p>
            </div>
          </div>
          <div class="legend-item">
            <span class="legend-status legend-status--mathlib"></span>
            <div>
              <strong>Dark green</strong>
              <p>Formalised upstream and supplied by Mathlib.</p>
            </div>
          </div>
          <div class="legend-item">
            <span class="legend-status legend-status--needs-work"></span>
            <div>
              <strong>Grey</strong>
              <p>Blueprint narrative only; no Lean target associated yet.</p>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main class="graph-layout">
      <section id="graph" aria-label="Dependency graph"></section>
      <aside id="details" aria-live="polite">
        <h2>Details</h2>
        <p>Select a node to inspect its Lean declaration and dependencies.</p>
      </aside>
    </main>

    <footer class="page-footer">
      <p>
        Generated from <code>src/content.tex</code> using
        <code>tools/generate_dep_graph.py</code>. Status colours mirror the
        blueprint readiness pipeline (statement → proof → formalisation).
      </p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js"></script>
    <script src="js/graph-data.js"></script>
    <script src="js/dep-graph.js"></script>
  </body>
</html>
